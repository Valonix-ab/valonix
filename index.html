<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valonix</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <style>
    /* Your existing styles here... */
  </style>
</head>
<body>
  <header>
    <h1>VALONIX</h1>
    <p>Smart AI solutions for the companies of tomorrow</p>
  </header>

  <div class="input-container">
    <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off" />
    <button class="send-button" onclick="sendMessage()">Send</button>
  </div>

  <div id="responseBox"></div>

  <script>
    async function sendMessage() {
      const inputElem = document.getElementById("userInput");
      const responseBox = document.getElementById("responseBox");
      const userInput = inputElem.value.trim();
      if (!userInput) return;
      responseBox.innerText = "Thinking...";
      try {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: userInput }),
        });
        const data = await res.json();
        responseBox.innerText = data.response || "No response received.";
      } catch (error) {
        responseBox.innerText = "Error: " + error.message;
      }
      inputElem.value = "";
      inputElem.focus();
    }
  </script>

  <!-- ✅ HERE IS THE EMBEDDED CHAT WIDGET CODE -->
  <script>
    // Add widget styles
    const style = document.createElement("style");
    style.innerHTML = `
      #valonix-widget-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #111;
        color: white;
        border: none;
        padding: 12px 16px;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        z-index: 9999;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      }
      #valonix-widget-box {
        position: fixed;
        bottom: 80px;
        right: 20px;
        width: 300px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        display: none;
        flex-direction: column;
        padding: 16px;
        z-index: 9998;
      }
      #valonix-widget-box textarea {
        width: 100%;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        resize: none;
        margin-top: 8px;
      }
      #valonix-send {
        margin-top: 10px;
        background: #111;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
      }
      #valonix-response {
        margin-top: 10px;
        font-size: 14px;
        white-space: pre-wrap;
        color: #333;
      }
    `;
    document.head.appendChild(style);

    // Add button and widget to DOM
    const button = document.createElement("button");
    button.id = "valonix-widget-button";
    button.innerText = "Chat";
    const widget = document.createElement("div");
    widget.id = "valonix-widget-box";
    widget.innerHTML = `
      <div><strong>Ask Valonix</strong></div>
      <textarea id="valonix-input" rows="3" placeholder="Ask me something..."></textarea>
      <button id="valonix-send">Send</button>
      <div id="valonix-response"></div>
    `;
    document.body.appendChild(button);
    document.body.appendChild(widget);

    // Toggle widget on button click
    button.addEventListener("click", () => {
      widget.style.display = widget.style.display === "none" ? "flex" : "none";
    });

    // Handle chat logic
    document.getElementById("valonix-send").addEventListener("click", async () => {
      const input = document.getElementById("valonix-input");
      const response = document.getElementById("valonix-response");
      const message = input.value.trim();
      if (!message) return;
      response.innerText = "Thinking...";
      try {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message }),
        });
        const data = await res.json();
        response.innerText = data.response || "No response.";
      } catch (err) {
        response.innerText = "Error: " + err.message;
      }
      input.value = "";
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valonix</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <style>
    /* Your existing styles here... */
  </style>
</head>
<body>
  <header>
    <h1>VALONIX</h1>
    <p>Smart AI solutions for the companies of tomorrow</p>
  </header>

  <div class="input-container">
    <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off" />
    <button class="send-button" onclick="sendMessage()">Send</button>
  </div>

  <div id="responseBox"></div>

  <script>
    async function sendMessage() {
      const inputElem = document.getElementById("userInput");
      const responseBox = document.getElementById("responseBox");
      const userInput = inputElem.value.trim();
      if (!userInput) return;
      responseBox.innerText = "Thinking...";
      try {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: userInput }),
        });
        const data = await res.json();
        responseBox.innerText = data.response || "No response received.";
      } catch (error) {
        responseBox.innerText = "Error: " + error.message;
      }
      inputElem.value = "";
      inputElem.focus();
    }
  </script>

  <!-- ✅ HERE IS THE EMBEDDED CHAT WIDGET CODE -->
  <script>
    // Add widget styles
    const style = document.createElement("style");
    style.innerHTML = `
      #valonix-widget-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #111;
        color: white;
        border: none;
        padding: 12px 16px;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        z-index: 9999;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      }
      #valonix-widget-box {
        position: fixed;
        bottom: 80px;
        right: 20px;
        width: 300px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        display: none;
        flex-direction: column;
        padding: 16px;
        z-index: 9998;
      }
      #valonix-widget-box textarea {
        width: 100%;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        resize: none;
        margin-top: 8px;
      }
      #valonix-send {
        margin-top: 10px;
        background: #111;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
      }
      #valonix-response {
        margin-top: 10px;
        font-size: 14px;
        white-space: pre-wrap;
        color: #333;
      }
    `;
    document.head.appendChild(style);

    // Add button and widget to DOM
    const button = document.createElement("button");
    button.id = "valonix-widget-button";
    button.innerText = "Chat";
    const widget = document.createElement("div");
    widget.id = "valonix-widget-box";
    widget.innerHTML = `
      <div><strong>Ask Valonix</strong></div>
      <textarea id="valonix-input" rows="3" placeholder="Ask me something..."></textarea>
      <button id="valonix-send">Send</button>
      <div id="valonix-response"></div>
    `;
    document.body.appendChild(button);
    document.body.appendChild(widget);

    // Toggle widget on button click
    button.addEventListener("click", () => {
      widget.style.display = widget.style.display === "none" ? "flex" : "none";
    });

    // Handle chat logic
    document.getElementById("valonix-send").addEventListener("click", async () => {
      const input = document.getElementById("valonix-input");
      const response = document.getElementById("valonix-response");
      const message = input.value.trim();
      if (!message) return;
      response.innerText = "Thinking...";
      try {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message }),
        });
        const data = await res.json();
        response.innerText = data.response || "No response.";
      } catch (err) {
        response.innerText = "Error: " + err.message;
      }
      input.value = "";
    });
  </script>
</body>
</html>
